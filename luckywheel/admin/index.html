<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lucky Draw Admin</title>
<link rel="stylesheet" href="./assest.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
<header>
  <div class="headLeft">
    <button id="btnMenu" class="menuBtn">‚ò∞</button>
    <div class="brand"><span class="dot"></span> LUCKY DRAW <span style="opacity:.6;font-weight:700">ADMIN</span></div>
  </div>

  <nav>
    <a href="5g88/luckywheel/spin">Home</a>
    <a href="#codes">Codes</a>
    <a href="#history">History</a>
  </nav>
</header>

<!-- Sidebar overlay -->
<div id="sideOverlay" class="sideOverlay"></div>

<!-- Sidebar -->
<aside id="sidebar" class="sidebar">
  <div class="sideHead">
    <div class="sideTitle">Menu</div>
    <button id="btnSideClose" class="sideClose">‚úï</button>
  </div>
  <button class="sideItem" id="sidePrize">Prize Settings</button>
  <button class="sideItem" id="sideLogout">Logout</button>
</aside>

<!-- Prize Modal -->
<div id="prizeOverlay" class="modalOverlay">
  <div class="modalCard">
    <div class="modalHead">
      <div class="modalTitle">Prize Settings</div>
      <button id="prizeX" class="modalX">‚úï</button>
    </div>

    <div class="modalBody">
      <div class="tabsRow">
        <button id="tabNormal" class="tabBtn active">NORMAL</button>
        <button id="tabSuper" class="tabBtn">SUPER</button>
      </div>

      <div class="pillRow" id="prizePills"></div>

      <div class="addRow">
        <input id="prizeInput" type="number" placeholder="Add prize" />
        <button id="prizeAdd" class="btn2">+ Add</button>
      </div>

      <small style="opacity:.75;display:block;margin-top:10px;">
        Click buttuon +add and Save.
      </small>
    </div>

    <div class="modalFoot">
      <button id="prizeCancel" class="btn2">Cancel</button>
      <button id="prizeSave" class="btn">Save</button>
    </div>
  </div>
</div>

<div class="wrap">
  <div class="grid">
    <div class="card">
      <h3>Generate Promo Code</h3>
      <div class="body">
        <label><span class="label-required"></span>Username Customer</label>
        <input id="customer"/>

        <div class="toggle">
          <button class="pill active" id="typeNormal">üéØ NORMAL PRIZE</button>
          <button class="pill" id="typeSuper">‚≠ê SUPER PRIZE</button>
        </div>

<label><span class="label-required"></span>Select Prize (Points)</label>
<select id="points" class="nativeSelect"></select>
<div class="cs" id="pointsCS"></div>

        <div class="row">
          <div>
            <label><span class="label-required"></span>Expiration Time (hours)</label>
            <input id="expHours" type="number" min="1" value="24"/>
          </div>
          <div>
            <label><span class="label-required"></span>Usage Limit</label>
            <input id="usageLimit" type="number" min="1" value="1"/>
          </div>
        </div>

        <button class="btn" id="btnGenerate">Ôºã Generate Promo Code</button>
      </div>
    </div>

    <div class="card">
      <h3>Generated Code</h3>
      <div class="body">
        <div class="codeBox">
          <div class="sub">Your code</div>
          <div class="bigCode" id="genCode">‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî</div>
          <div class="sub" id="genMeta">Generate a code to see details.</div>
          <button class="btn2" id="btnCopy" disabled>üìã Copy Code</button>
        </div>
      </div>
      <!-- ===== FILTER + SUMMARY (UNDER CODEBOX) ===== -->
<div class="codeTools" style="padding:14px;">
  <div class="selectWrap">
<select id="prizeFilter" class="nativeSelect">
  <option value="ALL">All Prize</option>
  <option value="NORMAL">Normal Prize</option>
  <option value="SUPER">Super Prize</option>
</select>

<div id="prizeFilterCS"></div>
  </div>

  <div class="summaryRow">
    <div class="sumCard">
      <div class="sumLabel">Total Customer</div>
      <div class="sumValue" id="sumCustomers">0</div>
    </div>
    <div class="sumCard">
      <div class="sumLabel">Total Prize</div>
      <div class="sumValue" id="sumPrize">0</div>
    </div>
    <div class="sumCard">
      <div class="sumLabel">Total Code</div>
      <div class="sumValue" id="sumCodes">0</div>
    </div>
    <div class="sumCard">
  <div class="sumLabel">Total Claim</div>
  <div class="sumValue" id="sumClaim">0</div>
</div>
<div class="sumCard">
  <div class="sumLabel">Total Unclaim</div>
  <div class="sumValue" id="sumUnclaim">0</div>
</div>
  </div>

  <div class="sub" id="sumHint" style="margin-top:8px;opacity:.75">
    Summary based on Active Promo Codes.
  </div>
</div>
    </div>
  </div>

  <div style="height:16px"></div>

  <div class="card" id="codes">
    <h3>Active Promo Codes</h3>
    <div class="body">
<div class="row" style="grid-template-columns: 1fr 240px 1fr;">
  <input id="searchCode" placeholder="Search by code / Username..."/>

  <!-- STATUS FILTER (custom select macam points) -->
  <div class="selectWrap">
    <select id="statusFilter" class="nativeSelect">
      <option value="ALL" selected>All</option>
      <option value="APPROVED">Approved</option>
      <option value="PENDING">Pending</option>
    </select>
    <div id="statusFilterCS"></div>
  </div>

  <button class="btn2" id="btnRefresh">‚Üª Refresh</button>
</div>
<div class="tableWrap table-scroll" style="margin-top:10px">
  <table>
    <thead>
      <tr>
        <th>Code</th>
        <th>Username</th>
        <th>Prize</th>
        <th>Type</th>
        <th>Used</th>
        <th>Limit</th>
        <th>Expires</th>
        <th>Created At</th>
        <th>Claimed At</th>
        <th>Status</th>
        <th style="width:120px;text-align:center;">Action</th>
      </tr>
    </thead>

    <tbody id="codesTbody">
      <tr><td colspan="11" style="color:rgba(233,236,255,.65)">Loading...</td></tr>
    </tbody>
  </table>
</div>
    </div>
  </div>
<div style="height:16px"></div>
<div class="card" id="totalsHistoryCard">
  <h3>Totals History</h3>
  <div class="body">
<div class="mini" style="gap:12px;flex-wrap:wrap;align-items:center">

<!-- Flatpickr CSS -->
<div class="dateRangeRow">
  <input id="rangePicker" class="niceInput" type="text" placeholder="Select date range" readonly>
  <input id="rangeFrom" type="date" hidden>
  <input id="rangeTo" type="date" hidden>
</div>

  <!-- kanan: preset chips -->
  <div class="presetRow" id="presetRow" style="display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end">
    <button class="chipBtn active" data-preset="today">Today</button>
    <button class="chipBtn" data-preset="yesterday">Yesterday</button>
    <button class="chipBtn" data-preset="thisweek">This Week</button>
    <button class="chipBtn" data-preset="lastweek">Last Week</button>
    <button class="chipBtn" data-preset="thismonth">This Month</button>
    <button class="chipBtn" data-preset="lastmonth">Last Month</button>
  </div>

</div>

    <div class="tableWrap" style="margin-top:12px">
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Total Customer</th>
            <th>Total Prize</th>
            <th>Total Code</th>
            <th>Normal Codes</th>
            <th>Super Codes</th>
            <th>Claim</th>
            <th>Unclaim</th>
          </tr>
        </thead>
        <tbody id="statsTbody">
          <tr><td colspan="8" style="opacity:.7">No stats yet.</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
  <div style="height:16px"></div>

  <div class="card" id="history">
    <h3>Redemption History</h3>
    <div class="body">
      <div class="row">
        <input id="searchHist" placeholder="Search by code / Username..."/>
        <button class="btn3" id="btnClearView">Clear Filter</button>
      </div>
      <div class="tableWrap" style="margin-top:10px">
        <table>
<thead>
  <tr>
    <th>Code</th>
    <th>Points</th>
    <th>Username</th>
    <th>Redeemed At</th>
    <th style="width:110px;text-align:right;">Actions</th>
  </tr>
</thead>
<tbody id="histTbody">
  <tr><td colspan="5" style="color:rgba(233,236,255,.65)">No history yet.</td></tr>
</tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<div class="toast" id="toast"></div>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script type="module" src="./assestman.js"></script>
</body>
</html>
