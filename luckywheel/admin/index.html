<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lucky Draw Admin</title>
<link rel="stylesheet" href="./assest.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
<header>
  <div class="headLeft">
    <button id="btnMenu" class="menuBtn">‚ò∞</button>
    <div class="brand"><span class="dot"></span> LUCKY DRAW <span style="opacity:.6;font-weight:700">ADMIN</span></div>
  </div>

<nav class="topNav" id="topNav">
  <a href="5g88/luckywheel/spin">Home</a>
  <a href="#codes">Codes</a>
  <a href="#history">History</a>

  <!-- ‚úÖ USER BUTTON (KANAN) -->
  <div class="userMenu" id="userMenu">
    <button class="userBtn" id="userBtn" type="button">
      <svg class="ico" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8V22h19.2v-2.8c0-3.2-6.4-4.8-9.6-4.8z"></path>
      </svg>

      <span id="navUsername"></span>
      <span class="caret">‚ñæ</span>
    </button>

<div class="userDrop" id="userDrop">
  <button class="dropItem" id="dropPrize">
    <!-- icon settings -->
    <svg class="ico" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M12 8.666c-1.838 0-3.333 1.496-3.333 3.334s1.495 3.333 3.333 3.333 3.333-1.495 3.333-3.333-1.495-3.334-3.333-3.334m0 7.667c-2.39 0-4.333-1.943-4.333-4.333s1.943-4.334 4.333-4.334 4.333 1.944 4.333 4.334c0 2.39-1.943 4.333-4.333 4.333m-1.193 6.667h2.386c.379-1.104.668-2.451 2.107-3.05 1.496-.617 2.666.196 3.635.672l1.686-1.688c-.508-1.047-1.266-2.199-.669-3.641.567-1.369 1.739-1.663 3.048-2.099v-2.388c-1.235-.421-2.471-.708-3.047-2.098-.572-1.38.057-2.395.669-3.643l-1.687-1.686c-1.117.547-2.221 1.257-3.642.668-1.374-.571-1.656-1.734-2.1-3.047h-2.386c-.424 1.231-.704 2.468-2.099 3.046-.365.153-.718.226-1.077.226-.843 0-1.539-.392-2.566-.893l-1.687 1.686c.574 1.175 1.251 2.237.669 3.643-.571 1.375-1.734 1.654-3.047 2.098v2.388c1.226.418 2.468.705 3.047 2.098.581 1.403-.075 2.432-.669 3.643l1.687 1.687c1.45-.725 2.355-1.204 3.642-.669 1.378.572 1.655 1.738 2.1 3.047m3.094 1h-3.803c-.681-1.918-.785-2.713-1.773-3.123-1.005-.419-1.731.132-3.466.952l-2.689-2.689c.873-1.837 1.367-2.465.953-3.465-.412-.991-1.192-1.087-3.123-1.773v-3.804c1.906-.678 2.712-.782 3.123-1.773.411-.991-.071-1.613-.953-3.466l2.689-2.688c1.741.828 2.466 1.365 3.465.953.992-.412 1.082-1.185 1.775-3.124h3.802c.682 1.918.788 2.714 1.774 3.123 1.001.416 1.709-.119 3.467-.952l2.687 2.688c-.878 1.847-1.361 2.477-.952 3.465.411.992 1.192 1.087 3.123 1.774v3.805c-1.906.677-2.713.782-3.124 1.773-.403.975.044 1.561.954 3.464l-2.688 2.689c-1.728-.82-2.467-1.37-3.456-.955-.988.41-1.08 1.146-1.785 3.126"/>
    </svg>

    <span class="dropText">Prize Settings</span>
  </button>

  <button class="dropItem" id="dropLogout">
    <!-- icon logout -->
    <svg class="ico" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M3 21V3h9v2H5v14h7v2zm13-4l-1.375-1.45l2.55-2.55H9v-2h8.175l-2.55-2.55L16 7l5 5z"/>
    </svg>

    <span class="dropText">Logout</span>
  </button>
</div>
  </div>
</nav>
</header>

<!-- Sidebar overlay -->
<div id="sideOverlay" class="sideOverlay"></div>

<!-- Sidebar -->
<aside id="sidebar" class="sidebar">
  <div class="sideHead">
    <div class="sideTitle">Menu</div>
    <button id="btnSideClose" class="sideClose">‚úï</button>
  </div>
  <button class="sideItem" id="sidePrize">Prize Settings</button>
  <button class="sideItem" id="sideLogout">Logout</button>
</aside>

<!-- Prize Modal -->
<div id="prizeOverlay" class="modalOverlay">
  <div class="modalCard">
    <div class="modalHead">
      <div class="modalTitle">Prize Settings</div>
      <button id="prizeX" class="modalX">‚úï</button>
    </div>

    <div class="modalBody">
      <div class="tabsRow">
        <button id="tabNormal" class="tabBtn active">NORMAL</button>
        <button id="tabSuper" class="tabBtn">SUPER</button>
      </div>

      <div class="pillRow" id="prizePills"></div>

      <div class="addRow">
        <input id="prizeInput" type="number" placeholder="Add prize" />
        <button id="prizeAdd" class="btn2">+ Add</button>
      </div>

      <small style="opacity:.75;display:block;margin-top:10px;">
        Click buttuon +add and Save.
      </small>
    </div>

    <div class="modalFoot">
      <button id="prizeCancel" class="btn2">Cancel</button>
      <button id="prizeSave" class="btn">Save</button>
    </div>
  </div>
</div>

<div class="wrap">
  <div class="grid">
    <div class="card">
      <h3>Generate Promo Code</h3>
      <div class="body">
        <label><span class="label-required"></span>Username Customer</label>
        <input id="customer"/>

        <div class="toggle">
          <button class="pill active" id="typeNormal">üéØ NORMAL PRIZE</button>
          <button class="pill" id="typeSuper">‚≠ê SUPER PRIZE</button>
        </div>

<label><span class="label-required"></span>Select Prize (Points)</label>
<select id="points" class="nativeSelect"></select>
<div class="cs" id="pointsCS"></div>

        <div class="row">
          <div>
            <label><span class="label-required"></span>Expiration Time (hours)</label>
            <input id="expHours" type="number" min="1" value="24"/>
          </div>
          <div>
            <label><span class="label-required"></span>Usage Limit</label>
            <input id="usageLimit" type="number" min="1" value="1"/>
          </div>
        </div>

        <button class="btn" id="btnGenerate">Ôºã Generate Promo Code</button>
      </div>
    </div>

    <div class="card">
      <h3>Generated Code</h3>
      <div class="body">
        <div class="codeBox">
          <div class="sub">Your code</div>
          <div class="bigCode" id="genCode">‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî</div>
          <div class="sub" id="genMeta">Generate a code to see details.</div>
          <button class="btn2 copyBtn" id="btnCopy" disabled>
  <svg class="btnIcon" viewBox="0 0 24 24" aria-hidden="true">
    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v16h13c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 18H8V7h11v16z"/>
  </svg>
  <span>Copy Code</span>
</button>
        </div>
      </div>
      <!-- ===== FILTER + SUMMARY (UNDER CODEBOX) ===== -->
<div class="codeTools" style="padding:14px;">
  <div class="selectWrap">
<select id="prizeFilter" class="nativeSelect">
  <option value="ALL">All Prize</option>
  <option value="NORMAL">Normal Prize</option>
  <option value="SUPER">Super Prize</option>
</select>

<div id="prizeFilterCS"></div>
  </div>

  <div class="summaryRow">
    <div class="sumCard">
      <div class="sumLabel">Total Customer</div>
      <div class="sumValue" id="sumCustomers">0</div>
    </div>
    <div class="sumCard">
      <div class="sumLabel">Total Prize</div>
      <div class="sumValue" id="sumPrize">0</div>
    </div>
    <div class="sumCard">
      <div class="sumLabel">Total Code</div>
      <div class="sumValue" id="sumCodes">0</div>
    </div>
    <div class="sumCard">
  <div class="sumLabel">Total Claim</div>
  <div class="sumValue" id="sumClaim">0</div>
</div>
<div class="sumCard">
  <div class="sumLabel">Total Unclaim</div>
  <div class="sumValue" id="sumUnclaim">0</div>
</div>
  </div>

  <div class="sub" id="sumHint" style="margin-top:8px;opacity:.75">
    Summary based on Active Promo Codes.
  </div>
</div>
    </div>
  </div>

  <div style="height:16px"></div>

  <div class="card" id="codes">
    <h3>Active Promo Codes</h3>
    <div class="body">
<div class="row" style="grid-template-columns: 1fr 240px;">
  <input id="searchCode" placeholder="Search by code / Username..."/>

  <!-- STATUS FILTER (custom select macam points) -->
  <div class="selectWrap">
    <select id="statusFilter" class="nativeSelect">
      <option value="ALL" selected>All</option>
      <option value="APPROVED">Approved</option>
      <option value="PENDING">Pending</option>
    </select>
    <div id="statusFilterCS"></div>
  </div>
</div>
      
<div class="tableWrap table-scroll" style="margin-top:10px">
  <table>
    <thead>
      <tr>
        <th>Code</th>
        <th>Username</th>
        <th>Prize</th>
        <th>Type</th>
        <th>Used</th>
        <th>Limit</th>
        <th>Expires</th>
        <th>Created At</th>
        <th>Claimed At</th>
        <th>Status</th>
        <th style="width:120px;text-align:center;">Action</th>
      </tr>
    </thead>

    <tbody id="codesTbody">
      <tr><td colspan="11" style="color:rgba(233,236,255,.65)">Loading...</td></tr>
    </tbody>
  </table>
</div>
    </div>
  </div>
<div style="height:16px"></div>
<div class="card" id="totalsHistoryCard">
  <h3>Totals History</h3>
  <div class="body">
<div class="mini" style="gap:12px;flex-wrap:wrap;align-items:center">

<!-- Flatpickr CSS -->
<div class="dateRangeRow">
  <input id="rangePicker" class="niceInput" type="text" placeholder="Select date range" readonly>
  <input id="rangeFrom" type="date" hidden>
  <input id="rangeTo" type="date" hidden>
</div>

  <!-- kanan: preset chips -->
  <div class="presetRow" id="presetRow" style="display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end">
    <button class="chipBtn active" data-preset="today">Today</button>
    <button class="chipBtn" data-preset="yesterday">Yesterday</button>
    <button class="chipBtn" data-preset="thisweek">This Week</button>
    <button class="chipBtn" data-preset="lastweek">Last Week</button>
    <button class="chipBtn" data-preset="thismonth">This Month</button>
    <button class="chipBtn" data-preset="lastmonth">Last Month</button>
  </div>

</div>

    <div class="tableWrap" style="margin-top:12px">
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Total Customer</th>
            <th>Total Prize</th>
            <th>Total Code</th>
            <th>Normal Codes</th>
            <th>Super Codes</th>
            <th>Claim</th>
            <th>Unclaim</th>
          </tr>
        </thead>
        <tbody id="statsTbody">
          <tr><td colspan="8" style="opacity:.7">No stats yet.</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
  <div style="height:16px"></div>

  <div class="card" id="history">
    <h3>Redemption History</h3>
    <div class="body">
      <div class="row">
        <input id="searchHist" placeholder="Search by code / Username..."/>
        <button class="btn3" id="btnClearView">Clear Filter</button>
      </div>
      <div class="tableWrap" style="margin-top:10px">
        <table>
<thead>
  <tr>
    <th>Code</th>
    <th>Points</th>
    <th>Username</th>
    <th>Redeemed At</th>
    <th style="width:110px;text-align:center;">Actions</th>
  </tr>
</thead>
<tbody id="histTbody">
  <tr><td colspan="5" style="color:rgba(233,236,255,.65)">No history yet.</td></tr>
</tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<div class="toast" id="toast"></div>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script type="module" src="./assestman.js"></script>
</body>
</html>
